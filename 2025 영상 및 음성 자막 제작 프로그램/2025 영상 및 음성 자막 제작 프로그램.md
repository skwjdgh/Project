# 영상-음성 기반 자막 생성기 프로젝트

## 1. 프로젝트 개요
- 한국어는 동일 상황에서도 다양한 어휘가 존재하고, 호칭과 높임말에 따라 표현이 달라집니다.  
- 본 프로젝트는 AI 기반 자동 자막 생성기를 개발하여, 영상/음성 컨텐츠를 한국어 자막으로 자동 변환하고, 기존 번역/자막 제작의 수작업 부담을 줄이는 것을 목표로 합니다.  
- **3중 파이프라인 구조**를 기반으로, VAD → STT → NLP → 자막 생성 및 싱크 조정 → 자막 저장 순으로 동작합니다.  

---

## 2. 프로젝트 디렉토리 구조

📂 SubtitleGenerator
├── main.py # 전체 프로그램 실행 진입점
├── def_config.py # 환경 설정
├── def_exception.py # 전역 예외 처리
│
├── 📂 Pipeline
│ ├── pipeline_stage1.py # Stage1: VAD → STT
│ ├── pipeline_stage2.py # Stage2: NLP 처리
│ ├── pipeline_stage3.py # Stage3: 자막 처리 및 저장
│ └── def_exception.py
│
├── 📂 Utility
│ ├── 📂 VAD
│ │ ├── imp_vad.py # VAD 기능 통합 인터페이스
│ │ ├── vad_split.py # 음성 구간 추출
│ │ ├── vad_filter.py # 잡음 구간 필터링
│ │ └── def_exception.py
│ │
│ ├── 📂 STT
│ │ ├── imp_stt.py # STT 기능 통합 인터페이스
│ │ ├── stt_model.py # 모델 로딩
│ │ ├── stt_preprocess.py # 음성 전처리
│ │ ├── stt_postprocess.py # 후처리
│ │ └── def_exception.py
│ │
│ ├── 📂 NLP
│ │ ├── imp_nlp.py # NLP 기능 통합 인터페이스
│ │ ├── nlp_tokenizer.py # 토큰화
│ │ ├── nlp_cleaner.py # 불필요한 텍스트 제거
│ │ ├── nlp_context.py # 맥락 분석
│ │ └── def_exception.py
│ │
│ ├── 📂 Formatter
│ │ ├── imp_formatter.py # 포맷 변환 통합 인터페이스
│ │ ├── fmt_style.py # 문체 변환
│ │ ├── fmt_normalizer.py # 어휘 표준화
│ │ └── def_exception.py
│ │
│ ├── 📂 SubtitleProcessing
│ │ ├── imp_subtitle.py # 자막 처리 통합 인터페이스
│ │ ├── sub_structure.py # 자막 데이터 구조화
│ │ ├── sub_merger.py # 문장 병합/분할
│ │ └── def_exception.py
│ │
│ ├── 📂 SyncAdjust
│ │ ├── imp_sync.py # 싱크 조정 통합 인터페이스
│ │ ├── sync_matcher.py # 오디오-텍스트 싱크 매칭
│ │ ├── sync_optimizer.py # 타임스탬프 보정
│ │ └── def_exception.py
│ │
│ ├── 📂 SubtitleSave
│ │ ├── imp_save.py # 저장 기능 통합 인터페이스
│ │ ├── save_srt.py # SRT 저장
│ │ ├── save_vtt.py # VTT 저장
│ │ ├── save_txt.py # TXT 저장
│ │ └── def_exception.py
│ │
│ └── 📂 Common
│ ├── imp_logger.py # 로깅 모듈
│ ├── imp_fileio.py # 파일 입출력 모듈
│ └── def_exception.py
│
└── 📂 Input_data
├── 📂 video
├── 📂 audio
└── 📂 text

python
코드 복사

---

## 3. imp_ 모듈 사용 방식

### 3.1 imp_stt.py (STT 예시)

```python
# Utility/STT/imp_stt.py
from .stt_model import load_stt_model, run_stt
from .stt_preprocess import preprocess_audio
from .stt_postprocess import postprocess_text
from .def_exception import STTException

__all__ = [
    "load_stt_model",
    "run_stt",
    "preprocess_audio",
    "postprocess_text",
    "STTException",
]

```

### 3.2 외부 사용 예시
python
코드 복사
from Utility.STT import imp_stt
from Utility.VAD import imp_vad
from Utility.NLP import imp_nlp

# VAD 처리
segments = imp_vad.split_audio("input.wav")
clean_segments = imp_vad.filter_noise(segments)

# STT 처리
model = imp_stt.load_stt_model("whisper")
for seg in clean_segments:
    audio = imp_stt.preprocess_audio(seg)
    raw_text = imp_stt.run_stt(model, audio)
    final_text = imp_stt.postprocess_text(raw_text)
    print(final_text)

# NLP 처리
tokens = imp_nlp.tokenize(final_text)
clean_text = imp_nlp.clean_text(tokens)
contextual = imp_nlp.analyze_context(clean_text)


## 4. 실행 흐름

main.py

Input_data 폴더의 여러 파일 탐색
Stage1 → Stage2 → Stage3 순서로 파이프라인 실행
결과는 Output 폴더에 저장
Pipeline 모듈
각 Stage에서는 Utility 모듈의 imp_ 파일만 호출
예외 처리 및 로그 기록 포함
Utility 모듈
세부 기능은 독립 유지
외부에서는 imp_ 파일 하나로 모든 기능 접근 가능

## 5. 장점

모듈화: 기능별 독립성과 재사용성 확보
Facade 패턴: 외부에서 imp_ 모듈만 import
확장성: 새로운 기능 추가 시 imp_ 파일만 구현
유지보수성: Pipeline은 흐름 제어, Utility는 기능 집중

